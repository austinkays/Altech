<header>
    <div class="header-top">
        <div class="logo tool-header-brand">
            <span class="logo-controls">
                <button type="button" class="logo-icon-button" onclick="App.goHome()" aria-label="Back to home">
                    <span class="logo-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span>
                </button>
                <button class="dark-mode-toggle" onclick="App.toggleDarkMode()" title="Toggle dark mode" aria-label="Toggle dark mode">
                    <span class="dark-mode-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span>
                </button>
            </span>
            <span>Prospect Investigator</span>
        </div>
        <div style="display: flex; gap: 12px; align-items: center;">
            <button id="generateCOIBtn" class="btn-secondary" onclick="ProspectInvestigator.generateCOI()" style="font-size: 14px; padding: 8px 16px; display: none;">
                ğŸ“„ Generate COI
            </button>
            <button class="btn-utility" onclick="ProspectInvestigator.exportReport()" style="font-size: 14px; padding: 8px 16px;">
                ğŸ–¨ï¸ Print Report
            </button>
        </div>
    </div>
    <div class="step-title">Commercial Business Intelligence & Public Records</div>
    <div class="progress-track"><div class="progress-fill" style="width: 100%;"></div></div>
</header>

<main style="padding: 20px; padding-bottom: 60px;">

    <!-- SEARCH SECTION -->
    <div class="card">
        <h2>ğŸ” Search Business</h2>
        <p class="section-subtitle">Lookup by business name, UBI number, or contractor registration</p>

        <div class="grid-2">
            <div>
                <label class="label">Business Name</label>
                <input type="text" id="prospectBusinessName" placeholder="e.g., ABC Construction LLC">
            </div>
            <div>
                <label class="label">UBI / CCB# (Optional)</label>
                <input type="text" id="prospectUBI" placeholder="e.g., 123-456-789 or CCB#">
            </div>
        </div>

        <div class="grid-2" style="margin-top: 16px;">
            <div>
                <label class="label">City</label>
                <input type="text" id="prospectCity" placeholder="e.g., Seattle">
            </div>
            <div>
                <label class="label">State</label>
                <select id="prospectState">
                    <option value="WA">Washington</option>
                    <option value="OR">Oregon</option>
                    <option value="AZ">Arizona</option>
                </select>
            </div>
        </div>

        <button class="btn-primary" onclick="ProspectInvestigator.search()" style="margin-top: 20px; width: 100%;">
            ğŸ” Run Full Investigation
        </button>
    </div>

    <!-- LOADING INDICATOR -->
    <div id="prospectLoading" style="display: none; text-align: center; padding: 40px;">
        <div style="font-size: 48px; margin-bottom: 16px;">â³</div>
        <h3>Investigating Business Records...</h3>
        <p style="color: var(--text-secondary);">Searching WA L&I, Secretary of State, OSHA, and other public databases</p>
    </div>

    <!-- RESULTS SECTION -->
    <div id="prospectResults" style="display: none;">

        <!-- BUSINESS SUMMARY -->
        <div class="card">
            <h2>ğŸ¢ Business Summary</h2>
            <div id="businessSummary"></div>
        </div>

        <!-- L&I CONTRACTOR INFO -->
        <div class="card">
            <h2>ğŸ”¨ WA L&I Contractor License</h2>
            <div id="liContractorInfo"></div>
        </div>

        <!-- SECRETARY OF STATE -->
        <div class="card">
            <h2>ğŸ“‹ Business Entity Records</h2>
            <div id="sosBusinessInfo"></div>
        </div>

        <!-- OSHA VIOLATIONS -->
        <div class="card">
            <h2>âš ï¸ OSHA Inspection History</h2>
            <div id="oshaViolations"></div>
        </div>

        <!-- BUSINESS CLASSIFICATION -->
        <div class="card">
            <h2>ğŸ“Š Risk Classification</h2>
            <div id="riskClassification"></div>
        </div>

        <!-- INVESTIGATION LINKS -->
        <div class="card">
            <h2>ğŸ”— Investigation Links</h2>
            <p style="color: var(--text-secondary); margin-bottom: 16px; font-size: 13px;">
                Open official records in new tabs for detailed manual review
            </p>
            <div id="investigationLinks"></div>
        </div>

        <!-- EXPORT ACTIONS -->
        <div class="card" style="background: #f8f9fa; border: 2px dashed #dee2e6;">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                <div>
                    <h3 style="margin: 0 0 4px 0; font-size: 16px;">ğŸ“‹ Export Options</h3>
                    <p style="margin: 0; font-size: 13px; color: var(--text-secondary);">
                        Export this investigation report for your workflow
                    </p>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button class="btn-secondary" onclick="ProspectInvestigator.copyToQuote()" style="font-size: 14px;">
                        ğŸ“‹ Copy to Quote
                    </button>
                    <button class="btn-utility" onclick="ProspectInvestigator.exportReport()" style="font-size: 14px;">
                        ğŸ–¨ï¸ Print Report
                    </button>
                </div>
            </div>
        </div>

    </div>

</main>
