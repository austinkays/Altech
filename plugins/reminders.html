<header>
    <div class="header-top">
        <div class="logo tool-header-brand">
            <span class="logo-controls">
                <button type="button" class="logo-icon-button" onclick="App.goHome()" aria-label="Back to home">
                    <span class="logo-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span>
                </button>
                <button class="dark-mode-toggle" onclick="App.toggleDarkMode()" title="Toggle dark mode" aria-label="Toggle dark mode">
                    <span class="dark-mode-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span>
                </button>
            </span>
            <span>Task Reminders</span>
        </div>
        <div style="display: flex; gap: 8px; align-items: center;">
            <button class="btn-utility" onclick="Reminders.showAdd()" style="font-size: 14px; padding: 8px 16px;">
                ï¼‹ New
            </button>
        </div>
    </div>
    <div class="step-title">Task Reminders</div>
</header>

<div style="padding-top: 20px;">
<div class="rem-container">

    <!-- Weekly Summary Badge -->
    <div class="rem-weekly-summary-bar">
        <span class="rem-weekly-icon">ðŸ“Š</span>
        <span class="rem-weekly-text" id="remWeeklySummary">0/0 tasks done this week</span>
        <button class="rem-grace-toggle" onclick="Reminders.toggleGracePeriod()" title="Toggle 6 AM grace period for night owls">
            ðŸ¦‰ Grace
        </button>
    </div>

    <!-- Stats Cards -->
    <div class="rem-stats-grid">
        <div class="rem-stat-card" onclick="Reminders.setFilter('all')">
            <div class="rem-stat-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg></div>
            <div class="rem-stat-value" id="remStatTotal">0</div>
            <div class="rem-stat-label">Total</div>
        </div>
        <div class="rem-stat-card overdue" onclick="Reminders.setFilter('overdue')">
            <div class="rem-stat-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg></div>
            <div class="rem-stat-value" id="remStatOverdue">0</div>
            <div class="rem-stat-label">Missed</div>
        </div>
        <div class="rem-stat-card due-today" onclick="Reminders.setFilter('due-today')">
            <div class="rem-stat-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div>
            <div class="rem-stat-value" id="remStatDueToday">0</div>
            <div class="rem-stat-label">Due Today</div>
        </div>
        <div class="rem-stat-card completed" onclick="Reminders.setFilter('completed')">
            <div class="rem-stat-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
            <div class="rem-stat-value" id="remStatCompleted">0</div>
            <div class="rem-stat-label">Done</div>
        </div>
    </div>

    <!-- Filters & Search -->
    <div class="rem-controls">
        <div class="rem-filter-row">
            <button class="rem-filter-btn active" data-filter="all" onclick="Reminders.setFilter('all')">All</button>
            <button class="rem-filter-btn" data-filter="active" onclick="Reminders.setFilter('active')">Active</button>
            <button class="rem-filter-btn" data-filter="overdue" onclick="Reminders.setFilter('overdue')">Missed</button>
            <button class="rem-filter-btn" data-filter="snoozed" onclick="Reminders.setFilter('snoozed')">Snoozed</button>
            <button class="rem-filter-btn" data-filter="due-today" onclick="Reminders.setFilter('due-today')">Today</button>
            <button class="rem-filter-btn" data-filter="completed" onclick="Reminders.setFilter('completed')">Done</button>
        </div>
        <div class="rem-search-row">
            <input type="text" class="rem-search" id="remSearchInput" placeholder="Search reminders...">
        </div>
        <div class="rem-search-row" style="margin-top: 8px;">
            <select class="rem-category-filter" id="remCategoryFilter" style="flex:1;">
                <option value="all">All Categories</option>
            </select>
        </div>
    </div>

    <!-- Task List -->
    <div class="rem-task-list" id="remTaskList">
        <div class="rem-empty">
            <div class="rem-empty-icon"><svg width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg></div>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Add Button (FAB) -->
    <button class="rem-fab" onclick="Reminders.showAdd()" aria-label="Add reminder">ï¼‹</button>

</div>
</div>

<!-- Edit / Add Modal -->
<div class="rem-modal-overlay" id="remEditModal" style="display: none;">
    <div class="rem-modal">
        <div class="rem-modal-header">
            <h3 id="remEditModalTitle">New Reminder</h3>
            <button class="rem-modal-close" onclick="Reminders.closeEdit()">&times;</button>
        </div>
        <div class="rem-modal-body">
            <div class="rem-field">
                <label>Title</label>
                <input type="text" id="remEditTitle" placeholder="e.g., Review expiring policies" maxlength="120">
            </div>
            <div class="rem-field">
                <label>Notes</label>
                <textarea id="remEditNotes" rows="3" placeholder="Additional details, links, instructions..."></textarea>
            </div>
            <div class="rem-field-row">
                <div class="rem-field">
                    <label>Due Date</label>
                    <input type="date" id="remEditDueDate">
                </div>
                <div class="rem-field">
                    <label>Frequency</label>
                    <select id="remEditFrequency">
                        <option value="once">One-time</option>
                        <option value="daily">Daily</option>
                        <option value="weekdays">Weekdays (Monâ€“Fri)</option>
                        <option value="weekly" selected>Weekly</option>
                        <option value="biweekly">Biweekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>
            </div>
            <div class="rem-field-row">
                <div class="rem-field">
                    <label>Category</label>
                    <select id="remEditCategory"></select>
                </div>
                <div class="rem-field">
                    <label>Priority</label>
                    <select id="remEditPriority">
                        <option value="low">Low</option>
                        <option value="normal" selected>Normal</option>
                        <option value="high">High</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="rem-modal-footer">
            <button class="btn-auth btn-auth-secondary" onclick="Reminders.closeEdit()">Cancel</button>
            <button class="btn-auth btn-auth-primary" onclick="Reminders.saveEdit()" style="margin-top:0;">Save</button>
        </div>
    </div>
</div>
